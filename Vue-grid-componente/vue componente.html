<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
    <script src="vue.min.js"></script>
    <link   rel="stylesheet" href="grid.css">
    <script src="d-grid.js"></script>
</head>
<body>
    <div id="demo">
        <table v-component="d-grid" v-with="$data"></table>
    </div>

    <br><br>

    <div id="ControlaComponente2">
        <table v-component="d-grid" v-with="$data"></table>
    </div>

<script>
var lista1 = [{ name: 'Chuck Norris', power: 9999, age: 10 },
              { name: 'Bruce Lee'   , power: 9000, age: 20 },
              { name: 'Jacky Chang' , power: 7000, age: 30 },
              { name: 'Jet Li'      , power: 8000, age:45 }];

var colunasListadas = [{ header: 'Nome',  key: 'name'   },
                       { header: 'Poder', key: 'power'  },
                       { header: 'Idade', key: 'age'    }];

//cria um controller
new Vue({
    el: '#demo',
    data: { // data é acessível fora do componente
        data: lista1,
        columns: colunasListadas,
        titulo: 'Experimente: Mover colunas, Clicar nas células e clicar no título da coluna',

        clickOnCell: function(coluna, registro) {
            alert('Coluna=' + coluna.key + ' / valor=' + registro[coluna.key]);
            this.data.push({name: "Dhiego", power: "Infinito", age: "12"});
        },
        processo: function(){
            var h = 'Col ' + (this.columns.length + 1);
            this.columns.push({header: h, key: 'name'});
        }
    }
});


var lista2 = [
    { nerd: 'Dhiego' , age: 24, endereco: 'Celestino José Capelatto n32'},
    { nerd: 'Nei'    , age: 30, endereco: 'Endereço Nei n 4878 ap 45'},
    { nerd: 'Flayner', age: 42, endereco: 'Asilo Veio cai morto. Quartinho 2'}];

var colunasListadas2 = [{ header: 'Nerd' ,    key: 'nerd'    },
                        { header: 'Idade',    key: 'age'     },
                        { header: 'Endereço', key: 'endereco'}];

new Vue({
    el: '#ControlaComponente2',
    data: {
        data: lista2,
        titulo: 'Experiment: mover colunas. OPS, não implementei clickOnCell',
        columns: colunasListadas2,

        processo: function(){
            alert('Quantidade de registros na grid: ' + this.data.length);
        }
    }
});

</script>
</body>
</html>